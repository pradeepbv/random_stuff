<!doctype html>
<html>
<head>
	<title>Video</title>
	<style>
		body {
			margin:50px 0px; padding:0px;
			text-align:center;
		}
		#Content {
			width:500px;
			margin:0px auto;
			text-align:left;
			padding:15px;
			border:1px dashed #333;
			background-color:#eee;
		}
	</style>
</head>
<body>
	<div id="content">
	<br><br><br>
	<h1>Browser can see you</h1>
	<video autoplay></video>
	<img src="">
	<canvas style="display:none;"></canvas>
	</div>
	<script>
		window.URL = window.URL || window.webkitURL;
		navigator.getUserMedia  = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
		var video = document.querySelector('video');
		var canvas = document.querySelector('canvas');
		var ctx = canvas.getContext('2d');
		var localMediaStream = null;

		function snapshot() {
			  if (localMediaStream) {
			      ctx.drawImage(video, 0, 0);
			      // "image/webp" works in Chrome 18. In other browsers, this will fall back to image/png.
			      document.querySelector('img').src = canvas.toDataURL('image/webp');
		        }
		}

		video.addEventListener('click', snapshot, false);
		if (navigator.getUserMedia) {
			navigator.getUserMedia({audio: true, video: true}, function(stream) {
				video.src = window.URL.createObjectURL(stream);
			}, function(fail){console.log(fail)});
			  } else {
			    video.src = 'http://html5videoformatconverter.com/data/images/happyfit2.mp4'; // fallback.
		    }
	</script>
	<!-- shamelessly copied from http://www.html5rocks.com/en/tutorials/getusermedia/intro/ -->
</body>
</html>
